{% extends "base.html" %}
{% block content %}
<h2 class="text-center mt-3">Add Domain Head and Resource Head</h2>
<form action="{% url 'add_head' %}" method="POST" class="mt-6" id="add-head-form">
    {% csrf_token %}
   
    {% if messages %}
      <div class="container mt-3">
        {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-danger{% elif message.tags == 'success' %}alert-success{% endif %} alert-dismissible fade show" role="alert">
              <i class="bi bi-check-circle-fill me-2"></i> 
              <span>{{ message|safe }}</span>
             <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
   {% endfor %}
     </div>
   {% endif %}

    <div class="form-group mt-3">
      <label for="name">Name</label>
      <input type="text" name="first_name" class="form-control" placeholder="Enter Name" required>
    </div>

    <div class="form-group mt-3">
      <label for="roll">Roll Number</label>
      <input type="text" name="roll_number" class="form-control" placeholder="Enter Roll Number"  required>
    </div>

    <div class="form-group mt-3">
        <label for="mail">Email (@kct.ac.in)</label>
        <input type="email" name="email" class="form-control" placeholder="Enter Email Address"  required>
      </div>
    
    <div class="form-group mt-3">
      <label for="domain">Select Domain</label>
      <select class="form-control" name="domain" required>
        <option value="Domain 1">Domain 1</option>
        <option value="Domain 2">Domain 2</option>
        <option value="Domain 3">Domain 3</option>
        <option value="Domain 4">Domain 4</option>
        <option value="Domain 5">Domain 5</option>
      </select>
    </div>
    <div class="form-group mt-3">
        <label for="role">Select Role</label>
        <select class="form-control" name="role" required>
          <option value="Domain Head">Domain Head</option>
          <option value="Domain Resource Head">Domain Resource Head</option>
        </select>
      </div>

      <div class="form-group mt-3">
        <label for="roll">Username</label>
        <input type="text" name="username" class="form-control" placeholder="Enter Username" required>
      </div>

      <div class="form-group mt-3">
        <label for="pass">Password</label>
        <input type="text" name="password" class="form-control" placeholder="Enter Password"  required>
      </div>
     <button class="btn btn-primary mt-3" type="submit">Add Head</button>
  </form>


  <div class="mt-2" id="HeadsTable">
    {% if Domain_Heads %}
    <h3 class="text-center">Domain Heads</h3>
    <div class="table-responsive">
    <table class="table table-bordered table-striped mt-3">
      <thead class="table-dark text-center">
        <tr>
          <th>Name</th>
          <th>Domain</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for head in Domain_Heads %}
        <tr>
          <td>{{ head.first_name }}</td>
          <td>{{ head.domain }}</td>
          <td class="text-center">
            <a href="{% url 'edit_head' head.id %}" class="btn btn-warning btn-sm">Edit</a>
            <a href="{% url 'terminate_head' head.id %}" class="btn btn-danger btn-sm">Terminate</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
    {% endif %}
    {% if Domain_Resource_Heads %}
    <h3 class="text-center mt-5">Domain Resource Heads</h3>
    <div class="table-responsive">
    <table class="table table-bordered table-striped mt-3">
      <thead class="table-dark text-center">
        <tr>
          <th>Name</th>
          <th>Domain</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for head in Domain_Resource_Heads %}
        <tr>
          <td>{{ head.first_name }}</td>
          <td>{{ head.domain }}</td>
          <td class="text-center">
            <a href="{% url 'edit_head' head.id %}" class="btn btn-warning btn-sm">Edit</a>
            <a href="{% url 'terminate_head' head.id %}" class="btn btn-danger btn-sm">Terminate</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
    {%endif%}
  </div>
{% endblock %}